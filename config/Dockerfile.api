FROM node:16

ARG PAT
ARG AWS_ACCESS_KEY_ID
ARG AWS_SECRET_ACCESS_KEY
ARG AUTH_SECRET
ARG EMAIL_PASS

ENV PAT=${PAT}
ENV AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
ENV AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
ENV AUTH_SECRET=${AUTH_SECRET}
ENV EMAIL_PASS=${EMAIL_PASS}

WORKDIR /usr/src
RUN git clone https://$PAT@github.com/Karmello/ask-the-world-api.git

WORKDIR /usr/src/ask-the-world-api
RUN yarn install
